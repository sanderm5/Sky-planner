# ============================================
# EL-KONTROLL + BRANNVARSLING 2026
# Environment Configuration - EXAMPLE FILE
# ============================================
# Copy this file to .env and fill in your values
# DO NOT commit .env file to Git (it's in .gitignore)

# Server Configuration
PORT=3000
NODE_ENV=development

# Base URL for the application (used in email links)
# Production: https://your-domain.com
# Development: http://localhost:3000
BASE_URL=http://localhost:3000

# ============================================
# API KEYS & EXTERNAL SERVICES
# ============================================

# OpenRouteService API Key (for route planning)
# Get a free key at: https://openrouteservice.org/dev/#/signup
# 1. Visit the signup page
# 2. Create account and verify email
# 3. Go to dashboard and copy your API key
# 4. Paste it below
ORS_API_KEY=your_openrouteservice_api_key_here

# Kartverket API (Norwegian geolocation service)
# Used for address geocoding
# Documentation: https://kartverket.no/api-og-data
KARTVERKET_API_KEY=

# Mapbox Access Token (for satellite imagery and dark mode maps)
# Get a token at: https://account.mapbox.com/access-tokens/
# SECURITY: Keep this token secret and rotate periodically
MAPBOX_ACCESS_TOKEN=your_mapbox_access_token_here

# ============================================
# APPLICATION SETTINGS
# ============================================

# Application Name & Branding (SaaS configurable)
APP_NAME=El-Kontroll + Brannvarsling

# Web URL (marketing website - for "Back to website" links)
# Production: https://skyplanner.no
# Development: http://localhost:3001
WEB_URL=http://localhost:3001

COMPANY_NAME=
COMPANY_SUBTITLE=Administrasjon av el-kontroll og brannvarsling
LOGO_URL=
CONTACT_ADDRESS=
CONTACT_PHONE=
CONTACT_EMAIL=
APP_YEAR=2026

# Map Configuration
# Default center coordinates (Norway)
MAP_CENTER_LAT=65.5
MAP_CENTER_LNG=12.0
MAP_ZOOM=5

# Default Tile Layer (Esri World Imagery)
# Other options:
# - OpenStreetMap: https://tile.openstreetmap.org/{z}/{x}/{y}.png
# - Esri Dark: https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}
MAP_TILE_URL=https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}
MAP_TILE_ATTRIBUTION=&copy; Esri, DigitalGlobe, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community

# ============================================
# DATABASE CONFIGURATION
# ============================================

# SQLite Database (local file - used as fallback)
DATABASE_PATH=./kunder.db

# ============================================
# SUPABASE DATABASE (Cloud PostgreSQL)
# ============================================
# Get these values from: https://supabase.com/dashboard/project/YOUR_PROJECT/settings/api

# Which database to use: 'sqlite' or 'supabase'
DATABASE_TYPE=sqlite

# Supabase Project URL
# Format: https://[PROJECT_ID].supabase.co
SUPABASE_URL=https://your-project-id.supabase.co

# Supabase Anon/Public Key (safe to use in frontend)
# Find under: Project Settings > API > Project API keys > anon public
SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Supabase Service Role Key (KEEP SECRET - only for server-side)
# Find under: Project Settings > API > Project API keys > service_role secret
SUPABASE_SERVICE_KEY=your-supabase-service-key-here

# ============================================
# CONTROL INTERVALS (in months)
# ============================================

# Default control intervals for new customers
DEFAULT_CONTROL_INTERVAL=12

# Available intervals for selection
CONTROL_INTERVALS=6,12,24,36

# ============================================
# FEATURE FLAGS & SETTINGS
# ============================================

# Enable/disable route planning feature
ENABLE_ROUTE_PLANNING=true

# Show/hide upcoming controls widget
SHOW_UPCOMING_WIDGET=true

# Number of days to look ahead for upcoming controls
UPCOMING_CONTROL_DAYS=30

# Max cluster radius for map markers (pixels)
MAP_CLUSTER_RADIUS=80

# ============================================
# LOGGING & DEBUGGING
# ============================================

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Enable debug logging
DEBUG=false

# ============================================
# SECURITY & PRIVACY
# ============================================

# JWT Secret for authentication tokens
# CRITICAL: Generate a strong secret with: openssl rand -base64 64
# MUST be at least 64 characters in production
# MUST be identical on both web and app for SSO to work
JWT_SECRET=your-super-secret-jwt-key-minimum-64-characters

# Cookie domain for cross-subdomain SSO
# Production: .skyplanner.no (note the leading dot)
# Staging: .staging.skyplanner.no
# Leave empty to use default based on environment
COOKIE_DOMAIN=

# CORS allowed origins (comma-separated)
# Production example: https://skyplanner.no,https://app.skyplanner.no,https://www.skyplanner.no
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Authentication requirement
# Set to 'false' to disable authentication (development only!)
# In production, this should always be 'true'
REQUIRE_AUTH=true

# ============================================
# EMAIL NOTIFICATIONS (Nodemailer)
# ============================================

# Enable/disable email notifications
EMAIL_NOTIFICATIONS_ENABLED=true

# SMTP Server Configuration
# For Gmail: smtp.gmail.com (port 587)
# For Outlook: smtp.office365.com (port 587)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587

# SMTP Authentication
# For Gmail: Use App Password (not regular password)
# Create at: https://myaccount.google.com/apppasswords
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_app_password_here

# Sender info (shown in emails)
EMAIL_FROM_NAME=El-Kontroll System
EMAIL_FROM_ADDRESS=noreply@example.com

# Notification settings
# Days before control to send first reminder
EMAIL_FIRST_REMINDER_DAYS=30

# Days after first reminder to send follow-up
EMAIL_REMINDER_AFTER_DAYS=7

# Client email (receives all notifications)
# Fallback if not set in database klient table
KLIENT_EPOST=admin@example.com

# ============================================
# ROUTE PLANNING (OpenRouteService)
# ============================================

# Company start location for route planning
# Set to your company's location
ROUTE_START_LAT=65.5
ROUTE_START_LNG=12.0
ROUTE_START_ADDRESS=

# ============================================
# AI-ASSISTERT IMPORT (valgfritt)
# ============================================

# Aktiver AI-assistert kolonnemapping ved import
AI_IMPORT_ENABLED=false

# Anthropic API-n√∏kkel for Claude
# Hent fra: https://console.anthropic.com/settings/keys
# Alternativt: sett ANTHROPIC_API_KEY (begge fungerer)
AI_API_KEY=

# AI-modell (standard: claude-3-5-haiku-latest)
# AI_MODEL=claude-3-5-haiku-latest

# Timeout i millisekunder (standard: 10000)
# AI_TIMEOUT_MS=10000

# ===== SENTRY FEILMONITORERING (valgfritt) =====
# Hent DSN fra: https://sentry.io/settings/projects/
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx
# SENTRY_ENVIRONMENT=development

