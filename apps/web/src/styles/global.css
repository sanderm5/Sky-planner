@import '@skyplanner/theme/polarnatt.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Map shared --sky-* theme → Tailwind RGB variables */
    --background: var(--sky-bg-primary-rgb);
    --foreground: var(--sky-text-primary-rgb);

    --tw-dark-950: var(--sky-bg-primary-rgb);
    --tw-dark-900: var(--sky-bg-secondary-rgb);
    --tw-dark-800: var(--sky-bg-tertiary-rgb);
    --tw-dark-700: var(--sky-border-rgb);
    --tw-dark-600: var(--sky-border-light-rgb);
    --tw-dark-500: var(--sky-text-muted-rgb);
    --tw-dark-400: var(--sky-text-muted-rgb);
    --tw-dark-300: var(--sky-text-secondary-rgb);
    --tw-dark-200: var(--sky-text-secondary-rgb);
    --tw-dark-100: var(--sky-text-primary-rgb);
    --tw-dark-50:  var(--sky-text-primary-rgb);
    --tw-primary-600: var(--sky-accent-rgb);
    --tw-primary-500: var(--sky-accent-rgb);
    --tw-primary-400: var(--sky-accent-secondary-rgb);

    /* Accent (comma-separated for rgba()) */
    --accent-rgb: 94, 129, 172;
    --accent-secondary-rgb: 132, 156, 185;
    --accent-tertiary-rgb: 168, 182, 200;
  }

  html {
    @apply scroll-smooth;
  }

  h1, h2 {
    font-family: 'Fraunces', Georgia, serif;
  }

  body {
    @apply bg-dark-950 text-dark-100 antialiased;
    background-image:
      radial-gradient(ellipse 130% 30% at 20% 0%, rgba(74, 222, 128, 0.07) 0%, transparent 55%),
      radial-gradient(ellipse 100% 25% at 55% 0%, rgba(94, 129, 172, 0.1) 0%, transparent 50%),
      radial-gradient(ellipse 70% 20% at 80% 2%, rgba(136, 192, 208, 0.08) 0%, transparent 45%),
      radial-gradient(ellipse 50% 15% at 35% 5%, rgba(180, 142, 173, 0.05) 0%, transparent 40%),
      radial-gradient(ellipse 90% 40% at 50% 100%, rgba(94, 129, 172, 0.04) 0%, transparent 50%);
    background-attachment: fixed;
  }

  /* Aurora borealis — animated northern lights across the top */
  body::after {
    content: '';
    position: fixed;
    top: 0;
    left: -10%;
    right: -10%;
    height: 55vh;
    z-index: -1;
    pointer-events: none;
    background:
      radial-gradient(ellipse 50% 80% at 25% 0%, rgba(74, 222, 128, 0.1) 0%, transparent 60%),
      radial-gradient(ellipse 40% 70% at 60% 0%, rgba(94, 129, 172, 0.12) 0%, transparent 55%),
      radial-gradient(ellipse 35% 60% at 45% 0%, rgba(136, 192, 208, 0.09) 0%, transparent 50%),
      radial-gradient(ellipse 30% 50% at 75% 5%, rgba(74, 222, 128, 0.06) 0%, transparent 45%),
      radial-gradient(ellipse 25% 40% at 15% 5%, rgba(180, 142, 173, 0.05) 0%, transparent 40%);
    animation: aurora 40s ease-in-out infinite alternate;
  }

  /* Starfield — tiled layers for dense star coverage */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: -2;
    pointer-events: none;
    background-image:
      /* Layer 1: Dim small stars — 150px tile */
      radial-gradient(1px 1px at 12px 28px, rgba(216, 226, 236, 0.3), transparent),
      radial-gradient(1px 1px at 68px 95px, rgba(216, 226, 236, 0.2), transparent),
      radial-gradient(1px 1px at 105px 15px, rgba(216, 226, 236, 0.25), transparent),
      radial-gradient(1px 1px at 38px 130px, rgba(216, 226, 236, 0.18), transparent),
      radial-gradient(1px 1px at 130px 60px, rgba(216, 226, 236, 0.22), transparent),
      radial-gradient(1px 1px at 85px 45px, rgba(216, 226, 236, 0.15), transparent),
      radial-gradient(1px 1px at 22px 80px, rgba(216, 226, 236, 0.2), transparent),
      radial-gradient(1px 1px at 115px 110px, rgba(216, 226, 236, 0.17), transparent),
      /* Layer 2: Medium stars — 280px tile */
      radial-gradient(1.2px 1.2px at 45px 60px, rgba(216, 226, 236, 0.35), transparent),
      radial-gradient(1.2px 1.2px at 180px 25px, rgba(216, 226, 236, 0.3), transparent),
      radial-gradient(1.2px 1.2px at 110px 200px, rgba(216, 226, 236, 0.28), transparent),
      radial-gradient(1.2px 1.2px at 250px 140px, rgba(216, 226, 236, 0.32), transparent),
      radial-gradient(1.2px 1.2px at 20px 240px, rgba(216, 226, 236, 0.25), transparent),
      radial-gradient(1.2px 1.2px at 200px 80px, rgba(216, 226, 236, 0.3), transparent),
      /* Layer 3: Bright accent stars — 450px tile */
      radial-gradient(1.5px 1.5px at 80px 120px, rgba(136, 192, 208, 0.4), transparent),
      radial-gradient(1.5px 1.5px at 300px 50px, rgba(216, 226, 236, 0.45), transparent),
      radial-gradient(1.5px 1.5px at 180px 350px, rgba(216, 226, 236, 0.4), transparent),
      radial-gradient(2px 2px at 400px 220px, rgba(136, 192, 208, 0.35), transparent);
    background-size:
      150px 150px, 150px 150px, 150px 150px, 150px 150px,
      150px 150px, 150px 150px, 150px 150px, 150px 150px,
      280px 280px, 280px 280px, 280px 280px, 280px 280px,
      280px 280px, 280px 280px,
      450px 450px, 450px 450px, 450px 450px, 450px 450px;
    background-attachment: fixed;
  }

  /* Custom scrollbar for dark theme */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-dark-900;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-dark-600 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-dark-500;
  }
}

@layer components {
  /* Glass Card */
  .glass-card {
    @apply bg-dark-800/50 backdrop-blur-xl border border-dark-700/50 rounded-2xl;
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.05),
      0 8px 32px rgba(0, 0, 0, 0.3);
  }

  .glass-card-hover {
    @apply glass-card transition-all duration-300;
  }

  .glass-card-hover:hover {
    @apply border-primary-500/30 shadow-glow;
    transform: translateY(-4px);
  }

  /* Buttons */
  .btn-primary {
    @apply inline-flex items-center justify-center px-6 py-3 text-base font-semibold text-white
           bg-gradient-to-r from-primary-500 to-primary-600 rounded-xl
           shadow-lg shadow-primary-500/25
           hover:from-primary-400 hover:to-primary-500
           focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-offset-2 focus:ring-offset-dark-900
           transition-all duration-200
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center px-6 py-3 text-base font-semibold
           text-dark-100 bg-dark-800/50 backdrop-blur-sm border border-dark-600
           rounded-xl hover:bg-dark-700/50 hover:border-dark-500
           focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-offset-2 focus:ring-offset-dark-900
           transition-all duration-200;
  }

  .btn-ghost {
    @apply inline-flex items-center justify-center px-4 py-2 text-sm font-medium
           text-dark-300 hover:text-white hover:bg-dark-800/50
           rounded-lg transition-colors duration-200
           focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-400 focus-visible:ring-offset-2 focus-visible:ring-offset-dark-900;
  }

  /* Skip to content link */
  .skip-to-content {
    @apply absolute -top-10 left-4 z-[100000] px-4 py-2 bg-primary-600 text-dark-950 font-semibold rounded-b-lg;
    transition: top 0.2s;
  }
  .skip-to-content:focus {
    @apply top-0;
  }

  /* Visually hidden utility */
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Gradient Text */
  .gradient-text {
    background: linear-gradient(135deg, #88C0D0, #5E81AC, #B48EAD);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Section Styles */
  .section {
    @apply py-20 px-4 sm:px-6 lg:px-8;
  }

  .container-narrow {
    @apply mx-auto max-w-3xl;
  }

  .container-wide {
    @apply mx-auto max-w-7xl;
  }

  /* Input Styles */
  .input {
    @apply w-full px-4 py-3 bg-dark-800/50 border border-dark-600 rounded-xl
           text-white placeholder-dark-400
           focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
           transition-all duration-200;
  }

  .input-label {
    @apply block text-sm font-medium text-dark-300 mb-2;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold
           bg-primary-500/10 text-primary-400 border border-primary-500/20;
  }

  .badge-success {
    @apply bg-secondary-500/10 text-secondary-400 border-secondary-500/20;
  }

  /* Navigation */
  .nav-link {
    @apply text-dark-300 hover:text-white transition-colors duration-200;
  }

  .nav-link-active {
    @apply text-white font-medium;
  }

  /* Glow Effects */
  .glow-border {
    position: relative;
  }

  .glow-border::before {
    content: '';
    position: absolute;
    inset: -1px;
    background: linear-gradient(135deg, rgb(var(--accent-rgb)), rgb(var(--accent-secondary-rgb)), rgb(var(--accent-tertiary-rgb)));
    border-radius: inherit;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .glow-border:hover::before {
    opacity: 1;
  }

  /* Feature Card */
  .feature-card {
    @apply glass-card-hover p-6;
  }

  .feature-card .icon {
    @apply w-12 h-12 rounded-xl bg-primary-500/10 flex items-center justify-center text-primary-400 mb-4;
  }

  /* Pricing Card */
  .pricing-card {
    @apply glass-card p-8 relative;
  }

  .pricing-card.featured {
    @apply border-primary-500/50;
    box-shadow:
      0 0 0 1px rgba(var(--accent-rgb), 0.3),
      0 0 40px rgba(var(--accent-rgb), 0.2);
  }

  .pricing-card .price {
    @apply text-4xl font-bold text-white;
  }

  .pricing-card .period {
    @apply text-dark-400 text-sm;
  }

  /* Table Styles */
  .comparison-table {
    @apply w-full glass-card overflow-hidden;
  }

  .comparison-table th {
    @apply p-4 text-left text-dark-300 bg-dark-800/50 font-medium;
  }

  .comparison-table td {
    @apply p-4 border-t border-dark-700/50;
  }

  .comparison-table tr:hover td {
    @apply bg-dark-800/30;
  }

  /* FAQ Accordion */
  .faq-item {
    @apply glass-card mb-4 overflow-hidden;
  }

  .faq-question {
    @apply w-full p-6 flex items-center justify-between text-left text-white font-medium
           hover:bg-dark-700/30 transition-colors cursor-pointer;
  }

  .faq-answer {
    @apply px-6 pb-6 text-dark-300;
  }

  /* Form Error */
  .form-error {
    @apply bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-xl text-sm;
  }

  /* Form Success */
  .form-success {
    @apply bg-secondary-500/10 border border-secondary-500/20 text-secondary-400 px-4 py-3 rounded-xl text-sm;
  }

  /* Screenshot 3D Effect */
  .screenshot-3d {
    @apply rounded-2xl overflow-hidden;
    transform: perspective(1000px) rotateX(5deg) rotateY(-5deg);
    transition: transform 0.5s ease, box-shadow 0.5s ease;
    box-shadow:
      0 25px 50px -12px rgba(0, 0, 0, 0.5),
      0 0 60px rgba(var(--accent-rgb), 0.15);
  }

  .screenshot-3d:hover {
    transform: perspective(1000px) rotateX(0deg) rotateY(0deg) scale(1.02);
    box-shadow:
      0 35px 60px -15px rgba(0, 0, 0, 0.6),
      0 0 80px rgba(var(--accent-rgb), 0.25);
  }

  .screenshot-3d img {
    @apply w-full h-auto;
  }

  /* Screenshot container with glow */
  .screenshot-container {
    @apply relative;
  }

  .screenshot-container::before {
    content: '';
    @apply absolute -inset-4 rounded-3xl opacity-50;
    background: radial-gradient(ellipse at center, rgba(var(--accent-rgb), 0.2) 0%, transparent 70%);
    filter: blur(20px);
    z-index: -1;
  }
}

@layer utilities {
  /* Text Balance */
  .text-balance {
    text-wrap: balance;
  }

  /* Animated Background */
  .animated-bg {
    background-size: 200% 200%;
    animation: gradient 8s ease infinite;
  }
}

/* ===== Aurora Background Animation ===== */
@keyframes aurora {
  0% {
    opacity: 0.6;
    transform: translateX(-6%) scaleX(1) scaleY(1);
  }
  20% {
    opacity: 0.9;
    transform: translateX(2%) scaleX(1.08) scaleY(1.1);
  }
  40% {
    opacity: 0.7;
    transform: translateX(5%) scaleX(0.95) scaleY(0.95);
  }
  60% {
    opacity: 1;
    transform: translateX(-3%) scaleX(1.12) scaleY(1.05);
  }
  80% {
    opacity: 0.75;
    transform: translateX(4%) scaleX(1) scaleY(1.08);
  }
  100% {
    opacity: 0.6;
    transform: translateX(-6%) scaleX(1) scaleY(1);
  }
}

/* ===== Scroll Animations ===== */

/* Base state for animated elements */
[data-animate] {
  opacity: 0;
  transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}

/* Visible state */
[data-animate].is-visible {
  opacity: 1;
  transform: none;
}

/* Animation variants */
[data-animate="fade-up"] {
  transform: translateY(30px);
}

[data-animate="fade-down"] {
  transform: translateY(-30px);
}

[data-animate="fade-left"] {
  transform: translateX(30px);
}

[data-animate="fade-right"] {
  transform: translateX(-30px);
}

[data-animate="fade"] {
  transform: none;
}

[data-animate="scale"] {
  transform: scale(0.95);
}

/* Stagger delays for children */
[data-animate-stagger] > [data-animate]:nth-child(1) { transition-delay: 0ms; }
[data-animate-stagger] > [data-animate]:nth-child(2) { transition-delay: 100ms; }
[data-animate-stagger] > [data-animate]:nth-child(3) { transition-delay: 200ms; }
[data-animate-stagger] > [data-animate]:nth-child(4) { transition-delay: 300ms; }
[data-animate-stagger] > [data-animate]:nth-child(5) { transition-delay: 400ms; }
[data-animate-stagger] > [data-animate]:nth-child(6) { transition-delay: 500ms; }

/* Custom delays */
[data-animate-delay="100"] { transition-delay: 100ms; }
[data-animate-delay="200"] { transition-delay: 200ms; }
[data-animate-delay="300"] { transition-delay: 300ms; }
[data-animate-delay="400"] { transition-delay: 400ms; }

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }

  [data-animate] {
    opacity: 1;
    transform: none;
    transition: none;
  }

  .glass-card-hover:hover {
    transform: none;
  }

  .screenshot-3d,
  .screenshot-3d:hover {
    transform: none;
    transition: none;
  }

  body::after {
    animation: none;
    opacity: 0.7;
  }
}
