---
import BaseLayout from '../layouts/BaseLayout.astro';
import GlassCard from '../components/ui/GlassCard.astro';
import Badge from '../components/ui/Badge.astro';
import CTA from '../components/sections/CTA.astro';

const plans = [
  {
    name: 'Standard',
    price: '499',
    description: 'Perfekt for mindre bedrifter som kommer i gang',
    featured: false,
    features: [
      { name: 'Opptil 200 kunder', included: true },
      { name: 'Opptil 5 brukere', included: true },
      { name: 'Interaktivt kart', included: true },
      { name: 'Ruteoptimalisering', included: true },
      { name: 'Automatiske varsler', included: true },
      { name: 'Kalender og avtaler', included: true },
      { name: 'E-postvarsler', included: true },
      { name: 'API-tilgang', included: false },
      { name: 'Prioritert support', included: false },
    ],
  },
  {
    name: 'Premium',
    price: '999',
    description: 'For voksende bedrifter med flere kunder',
    featured: true,
    features: [
      { name: 'Opptil 500 kunder', included: true },
      { name: 'Opptil 10 brukere', included: true },
      { name: 'Interaktivt kart', included: true },
      { name: 'Ruteoptimalisering', included: true },
      { name: 'Automatiske varsler', included: true },
      { name: 'Kalender og avtaler', included: true },
      { name: 'E-postvarsler', included: true },
      { name: 'API-tilgang', included: true },
      { name: 'Prioritert support', included: true },
    ],
  },
];

const comparisonFeatures = [
  { name: 'Antall kunder', standard: '200', premium: '500', enterprise: 'Ubegrenset' },
  { name: 'Antall brukere', standard: '5', premium: '10', enterprise: 'Ubegrenset' },
  { name: 'Interaktivt kart', standard: true, premium: true, enterprise: true },
  { name: 'Ruteoptimalisering', standard: true, premium: true, enterprise: true },
  { name: 'Automatiske varsler', standard: true, premium: true, enterprise: true },
  { name: 'Kalender og avtaler', standard: true, premium: true, enterprise: true },
  { name: 'E-postvarsler', standard: true, premium: true, enterprise: true },
  { name: 'Kontaktlogg', standard: true, premium: true, enterprise: true },
  { name: 'API-tilgang', standard: false, premium: true, enterprise: true },
  { name: 'Prioritert support', standard: false, premium: true, enterprise: true },
  { name: 'Dedikert kontakt', standard: false, premium: false, enterprise: true },
  { name: 'Tilpasset oppsett', standard: false, premium: false, enterprise: true },
];
---

<BaseLayout title="Priser" description="Se våre prisplaner for Sky Planner. Start med 14 dagers gratis prøveperiode.">
  <!-- Hero Section -->
  <section class="pt-32 pb-16 px-4 sm:px-6 lg:px-8">
    <div class="container-wide text-center">
      <Badge class="mb-6">14 dagers gratis prøveperiode</Badge>
      <h1 class="text-4xl sm:text-5xl font-bold text-white mb-4">
        Enkel og transparent prising
      </h1>
      <p class="text-lg text-dark-300 max-w-2xl mx-auto">
        Velg planen som passer din bedrift. Alle planer inkluderer full tilgang i prøveperioden.
      </p>
    </div>
  </section>

  <!-- Pricing Cards -->
  <section class="pb-20 px-4 sm:px-6 lg:px-8">
    <div class="container-wide">
      <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        {plans.map((plan) => (
          <div class:list={[
            'pricing-card relative',
            plan.featured && 'featured'
          ]}>
            {plan.featured && (
              <div class="absolute -top-4 left-1/2 -translate-x-1/2">
                <Badge variant="success">Mest populær</Badge>
              </div>
            )}

            <div class="text-center mb-8">
              <h3 class="text-2xl font-bold text-white mb-2">{plan.name}</h3>
              <p class="text-dark-400 mb-4">{plan.description}</p>
              <div class="flex items-baseline justify-center gap-1">
                <span class="price">{plan.price}</span>
                <span class="period">kr/mnd</span>
              </div>
            </div>

            <ul class="space-y-4 mb-8">
              {plan.features.map((feature) => (
                <li class="flex items-center gap-3">
                  {feature.included ? (
                    <svg class="w-5 h-5 text-secondary-500 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>
                  ) : (
                    <svg class="w-5 h-5 text-dark-600 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                    </svg>
                  )}
                  <span class:list={[
                    feature.included ? 'text-dark-200' : 'text-dark-500'
                  ]}>
                    {feature.name}
                  </span>
                </li>
              ))}
            </ul>

            <a
              href={`/auth/registrer?plan=${plan.name.toLowerCase()}`}
              class:list={[
                'block w-full text-center py-3 rounded-xl font-semibold transition-all',
                plan.featured
                  ? 'btn-primary'
                  : 'btn-secondary'
              ]}
            >
              Start gratis prøveperiode
            </a>
          </div>
        ))}
      </div>

      <!-- Enterprise CTA -->
      <div class="mt-12 text-center">
        <GlassCard class="max-w-2xl mx-auto">
          <div class="flex flex-col sm:flex-row items-center justify-between gap-6">
            <div class="text-left">
              <h3 class="text-xl font-bold text-white mb-1">Enterprise</h3>
              <p class="text-dark-400">Trenger du mer? Kontakt oss for en tilpasset løsning.</p>
            </div>
            <a href="/kontakt" class="btn-secondary whitespace-nowrap">
              Kontakt oss
            </a>
          </div>
        </GlassCard>
      </div>
    </div>
  </section>

  <!-- Comparison Table -->
  <section class="section bg-dark-950/30">
    <div class="container-wide">
      <h2 class="text-3xl font-bold text-white text-center mb-12">
        Sammenlign alle funksjoner
      </h2>

      <div class="comparison-table overflow-x-auto">
        <table class="w-full min-w-[600px]">
          <thead>
            <tr>
              <th class="text-left">Funksjon</th>
              <th class="text-center">Standard</th>
              <th class="text-center text-primary-400">Premium</th>
              <th class="text-center">Enterprise</th>
            </tr>
          </thead>
          <tbody>
            {comparisonFeatures.map((feature) => (
              <tr>
                <td class="text-dark-200">{feature.name}</td>
                <td class="text-center">
                  {typeof feature.standard === 'boolean' ? (
                    feature.standard ? (
                      <svg class="w-5 h-5 text-secondary-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                      </svg>
                    ) : (
                      <svg class="w-5 h-5 text-dark-600 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                      </svg>
                    )
                  ) : (
                    <span class="text-dark-300">{feature.standard}</span>
                  )}
                </td>
                <td class="text-center">
                  {typeof feature.premium === 'boolean' ? (
                    feature.premium ? (
                      <svg class="w-5 h-5 text-secondary-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                      </svg>
                    ) : (
                      <svg class="w-5 h-5 text-dark-600 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                      </svg>
                    )
                  ) : (
                    <span class="text-primary-400 font-medium">{feature.premium}</span>
                  )}
                </td>
                <td class="text-center">
                  {typeof feature.enterprise === 'boolean' ? (
                    feature.enterprise ? (
                      <svg class="w-5 h-5 text-secondary-500 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                      </svg>
                    ) : (
                      <svg class="w-5 h-5 text-dark-600 mx-auto" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                      </svg>
                    )
                  ) : (
                    <span class="text-dark-300">{feature.enterprise}</span>
                  )}
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="section">
    <div class="container-narrow">
      <h2 class="text-3xl font-bold text-white text-center mb-12">
        Ofte stilte spørsmål om priser
      </h2>

      <div class="space-y-4">
        <GlassCard>
          <details class="group">
            <summary class="flex items-center justify-between cursor-pointer list-none p-2">
              <span class="font-medium text-white">Kan jeg bytte plan senere?</span>
              <svg class="w-5 h-5 text-dark-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </summary>
            <p class="text-dark-400 mt-4 pt-4 border-t border-dark-700/50">
              Ja, du kan oppgradere eller nedgradere planen din når som helst. Endringer trer i kraft ved neste faktureringsperiode.
            </p>
          </details>
        </GlassCard>

        <GlassCard>
          <details class="group">
            <summary class="flex items-center justify-between cursor-pointer list-none p-2">
              <span class="font-medium text-white">Hva skjer etter prøveperioden?</span>
              <svg class="w-5 h-5 text-dark-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </summary>
            <p class="text-dark-400 mt-4 pt-4 border-t border-dark-700/50">
              Etter 14 dager starter abonnementet automatisk. Du kan avbryte når som helst før prøveperioden utløper uten kostnad.
            </p>
          </details>
        </GlassCard>

        <GlassCard>
          <details class="group">
            <summary class="flex items-center justify-between cursor-pointer list-none p-2">
              <span class="font-medium text-white">Tilbyr dere rabatt for årlig betaling?</span>
              <svg class="w-5 h-5 text-dark-400 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
              </svg>
            </summary>
            <p class="text-dark-400 mt-4 pt-4 border-t border-dark-700/50">
              Ja! Ved årlig betaling får du 2 måneder gratis. Kontakt oss for mer informasjon.
            </p>
          </details>
        </GlassCard>
      </div>

      <div class="text-center mt-8">
        <a href="/faq" class="text-primary-400 hover:text-primary-300 font-medium">
          Se alle spørsmål og svar →
        </a>
      </div>
    </div>
  </section>

  <CTA />
</BaseLayout>
